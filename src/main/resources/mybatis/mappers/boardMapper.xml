<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardDB">

	<!-- select 쿼리 (1개) ==> 아직 안씀 -->
	<select id="selectBoard"  parameterType="String" resultType="BoardVO">
		select *
		from board 
		where id=#{id}
	</select>

	
	<!-- select 쿼리 (유저별 문의 내역) -->
	<select id="selectUserBoardList" parameterType="String" resultType="BoardVO">
		select * 
		from board,problem,place,department 
		where problem.place_code=place.code
		and board.problem_code=problem.code 
		and board.problem_place_code=place.code 
		and board.department_code=department.code 
		and users_id=#{id}
	</select>
	
	<!-- select 쿼리 (각 점별 문의 내역) -->
	<select id="selectBoardList" parameterType="int" resultType="BoardVO">
		SELECT seq,datetime,clearTime,place_detail,problem_detail,flag,department_code,dep_name,floor,users_id 
		FROM board 
		join problem 
		join place 
		join department 
		ON board.problem_code = problem.code 
		and problem.place_code=place.code 
		and board.problem_place_code=place.code 
		and board.department_code=department.code 
		and board.department_code=#{department_code}
	</select>
	
	<!-- update 쿼리 -->	
	<update id="updateBoard" parameterType="boardVO">
		update board
		set problem_code=#{problem_code}, datetime=#{datetime}, problem_place_code=#{problem_place_code}, floor=#{floor} 
		where seq=#{seq}
	</update>
	
	<!-- delete 쿼리 -->
	<delete id="deleteBoard" parameterType="int">
		delete from board where seq=#{seq}
	</delete>	
	
	<!--  insert 쿼리 -->
	<insert id="insertBoard" parameterType="BoardVO">
		insert into board(floor, problem_code,problem_place_code,users_id,department_code,datetime)
		values(#{floor},#{problem_code},#{problem_place_code},#{users_id},#{department_code},#{datetime})
	</insert>
	
</mapper>